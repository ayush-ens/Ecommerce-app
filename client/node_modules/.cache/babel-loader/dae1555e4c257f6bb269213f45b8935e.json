{"ast":null,"code":"import _defineProperty from\"/home/ayush/ecom/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ayush/ecom/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/ayush/ecom/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ayush/ecom/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ayush/ecom/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable default-case */import axios from'axios';import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useNavigate}from'react-router-dom';import'./login-signup.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){var navigate=useNavigate();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),userLogin=_useState2[0],setUserlogin=_useState2[1];var redirectHandler=function redirectHandler(token){sessionStorage.setItem('login',token);navigate('/');};var authData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios,_yield$axios$data,status,message,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios({url:'http://localhost:8080/login',method:'post',data:userLogin});case 3:_yield$axios=_context.sent;_yield$axios$data=_yield$axios.data;status=_yield$axios$data.status;message=_yield$axios$data.message;token=_yield$axios$data.token;console.log(status,message,token);_context.t0=message;_context.next=_context.t0===\"flag3\"?12:_context.t0===\"flag0\"?13:_context.t0===\"flag00\"?14:_context.t0===\"flag000\"?15:_context.t0===\"flag0000\"?16:_context.t0===\"flag1\"?17:18;break;case 12:return _context.abrupt(\"return\",alert(\"validation failed !\"));case 13:return _context.abrupt(\"return\",alert(\"All fields are required !\"));case 14:return _context.abrupt(\"return\",alert(\"Server is down !\"));case 15:return _context.abrupt(\"return\",alert(\"Please check your email !\"));case 16:return _context.abrupt(\"return\",alert(\"Wrong password !\"));case 17:return _context.abrupt(\"return\",redirectHandler(token));case 18:_context.next=23;break;case 20:_context.prev=20;_context.t1=_context[\"catch\"](0);console.log('Somthing is wrong with form submission API',_context.t1);case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,20]]);}));return function authData(){return _ref.apply(this,arguments);};}();var _onSubmit=function onSubmit(e){e.preventDefault();authData();};var onInputHandler=function onInputHandler(e){setUserlogin(_objectSpread(_objectSpread({},userLogin),{},_defineProperty({},e.target.name,e.target.value)));};console.log(userLogin);return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',height:'fitContent'},children:/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form_container\",style:{padding:'0 1rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},children:[/*#__PURE__*/_jsx(\"input\",{name:\"email\",onChange:function onChange(e){return onInputHandler(e);},required:true,type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",onChange:function onChange(e){return onInputHandler(e);},required:true,type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",style:{float:'right'},children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"OR\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"div\",{className:\"newUser_btn\",children:\"New User?\"})})]})]})})});}export default LoginForm;","map":{"version":3,"names":["axios","React","useState","useEffect","Link","useNavigate","LoginForm","navigate","email","password","userLogin","setUserlogin","redirectHandler","token","sessionStorage","setItem","authData","url","method","data","status","message","console","log","alert","onSubmit","e","preventDefault","onInputHandler","target","name","value","display","justifyContent","height","padding","float"],"sources":["/home/ayush/ecom/client/src/components/Authentication/LoginForm.js"],"sourcesContent":["/* eslint-disable default-case */\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useNavigate } from 'react-router-dom'\nimport './login-signup.css'\n\nfunction LoginForm() {\n\n\n  const navigate = useNavigate();\n  const [userLogin, setUserlogin] = useState({ email: \"\", password: \"\" });\n\n  const redirectHandler = (token) => {\n    sessionStorage.setItem('login', token)\n    navigate('/')    \n  }\n\n  const authData = async () => {\n      try {\n        const { data: { status, message, token } } = await axios({\n          url: 'http://localhost:8080/login',\n          method: 'post',\n          data: userLogin\n        })\n        console.log(status, message, token)\n\n        switch (message) {\n          case \"flag3\":\n            return alert(\"validation failed !\");\n          case \"flag0\":\n            return alert(\"All fields are required !\");\n          case \"flag00\":\n            return alert(\"Server is down !\");\n          case \"flag000\":\n            return alert(\"Please check your email !\");\n          case \"flag0000\":\n            return alert(\"Wrong password !\");\n          case \"flag1\":\n            return redirectHandler(token);\n        }\n      }  \n      catch (error) {\n        console.log('Somthing is wrong with form submission API', error)\n      }\n    }\n\n    const onSubmit = (e) =>{\n      e.preventDefault();\n      authData()\n    }   \n\n\n  const onInputHandler = (e) => {\n    setUserlogin({ ...userLogin, [e.target.name]: e.target.value })\n  }\n\n\n  console.log(userLogin)\n\n  return (\n    <div style={{ display: 'flex', justifyContent: 'center', height: 'fitContent' }}>\n      <div className=\"form\">\n        <div className='form_container' style={{ padding: '0 1rem' }}>\n          <h2>Log In</h2>\n          <form onSubmit={(e)=>onSubmit(e)} >\n            <input name='email' onChange={(e) => onInputHandler(e)} required type='email' placeholder='Email' />\n            <input name='password' onChange={(e) => onInputHandler(e)} required type='password' placeholder='Password' />\n            <Link to='/' style={{ float: 'right' }}>Forgot Password</Link>\n            <input type='submit' />\n            <h3>OR</h3>\n            <Link to='/signup' ><div className='newUser_btn'>New User?</div></Link>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}